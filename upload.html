<!DOCTYPE html>
<html lang="en">
  <head>
  	<meta charset="utf-8">

	<title>Mobanic - Portal</title>
	<link rel="icon" type="image/png" href="img/favicon.png">	
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css">
    <link href="css/jumbotron-narrow.css" rel="stylesheet">
  	<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
  	<script type="text/javascript" src="http://www.parsecdn.com/js/parse-1.4.2.min.js"></script>
  	<script type="text/javascript">
	    Parse.initialize("asQfJUeEXdJnbfvG2iefkvjhVpcmIq2GnOp5x5P2", "nekbtqyfm8m3K6DRekriIij1U3fnxPLGiAq01Nf7");

	    var currentUser = Parse.User.current();
		if (!currentUser) {
		    window.location.replace('index.html');
		}

  	</script>
  </head>

  <body>

  	<div class="container">
  		<div class="header clearfix">
        <nav>
          <ul class="nav nav-pills pull-right">
            <li role="presentation" class="active"><a href="index.html">Portal</a></li>
            <li role="presentation"><a href="http://mobanic.com">Home</a></li>
          </ul>
        </nav>
        <a href="http://mobanic.com"><img src="img/header_logo.png"</img></a>
      
      </div>

    <div class="jumbotron">
    	<form onsubmit="return saveCar();">
	    <h1 style="font-size: 40px">Upload new car</h1><br>
		<div class="form-group">
		  <label for="inputMake label-large">Make</label>
		  <input type="text" class="form-control input-lg" id="inputMake" placeholder="Car make" value="Toyota" required autofocus>
		</div>
		<div class="form-group">
		  <label for="inputModel">Model</label>
		  <input type="text" class="form-control input-lg" id="inputModel" placeholder="Car model" value="Land Cruiser" required>
		</div>
		<div class="form-group">
		  <label for="inputYear">Year</label>
		  <input type="number" class="form-control input-lg" id="inputYear" placeholder="Model year" value="2011" required>
		</div>
		<div class="form-group">
		  <label for="inputPrice">Price</label>
		  <input type="number" class="form-control input-lg" id="inputPrice" placeholder="Price, £" value="80000" required>
		</div><br><br>

		<div class="form-group">
			<label for="inputMileage">Specs</label>
			<input type="number" class="form-control" id="inputMileage" placeholder="Mileage, km" style="border-bottom-left-radius: 0; border-bottom-right-radius: 0;" value="43500">
	        <input type="number" class="form-control" id="inputPreviousOwners" placeholder="Previous owners" style="border-radius: 0" value="2">
	        <input type="number" class="form-control" id="inputEngine" placeholder="Engine, cc" style="border-radius: 0" value="4800">
	        <input class="form-control" id="inputTransmission" placeholder="Transmission type" style="border-radius: 0" value="Semi-Automatic">
	        <input class="form-control" id="inputFuelType" placeholder="Fuel type" style="border-radius: 0" value="Diesel">
	        <input class="form-control" id="inputColor" placeholder="Color" style="border-radius: 0" value="Violet">
	        <input class="form-control" id="inputLocation" placeholder="Location (country code)" style="border-top-left-radius: 0; border-top-right-radius: 0;" value="UK">
        </div><br><br>

		<div class="form-group">
		  <label for="exampleInputFile">Cover image</label>
		  <input type="file" id="exampleInputFile">
		  <p class="help-block">Will be shown in main car listing.</p>
		</div><br>
		<button type="submit" class="btn btn-lg btn-success">Save</button>
	  </form>
	</div><br><br><br>

	<footer class="footer">
      <p class="text-center">Copyright © 2015 Mobanic Ltd</p>
    </footer>
    </div>
    </div>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
	<script type="text/javascript">

	 	function saveCar() {
			event.preventDefault();

			var make = document.getElementById("inputMake").value;
			var model = document.getElementById("inputModel").value;
			var year = parseInt(document.getElementById("inputYear").value);
			var price = parseInt(document.getElementById("inputPrice").value);

			var mileage = parseInt(document.getElementById("inputMileage").value);
			var previousOwners = parseInt(document.getElementById("inputPreviousOwners").value);
			var engine = parseInt(document.getElementById("inputEngine").value);
			var transmission = document.getElementById("inputTransmission").value;
			var fuelType = document.getElementById("inputFuelType").value;
			var color = document.getElementById("inputColor").value;
			var location = document.getElementById("inputLocation").value;

			var CarObject = Parse.Object.extend("Car");
		    var carObject = new CarObject();

		    carObject.set("make", make);
		    carObject.set("model", model);
		    carObject.set("year", year);
		    carObject.set("price", price);
		    carObject.set("isSold", false);
		    if (document.getElementById("inputMileage").value) {
		    	carObject.set("mileage", mileage);
		    }
		    if (document.getElementById("inputPreviousOwners").value) {
		    	carObject.set("previousOwners", previousOwners);
		    }
		    if (document.getElementById("inputEngine").value) {
		    	carObject.set("engine", engine + "cc");
		    }
		    if (transmission) {
		    	carObject.set("transmission", transmission);
		    }
		    if (fuelType) {
		    	carObject.set("fuelType", fuelType);
		    }
		    if (color) {
		    	carObject.set("color", color);
		    }
		    if (location) {
		    	carObject.set("location", location);
		    }

		    carObject.save(null, {
			  success: function(gameScore) {
			    Alert("The object was saved successfully.");
			  },
			  error: function(gameScore, error) {
			    Alert("The save failed.");
			  }
			});
		}
	</script>
  </body>
</html>